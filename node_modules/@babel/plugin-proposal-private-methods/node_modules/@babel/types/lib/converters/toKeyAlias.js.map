{"version":3,"names":["isIdentifier","isStringLiteral","cloneNode","removePropertiesDeep","toKeyAlias","node","key","alias","kind","increment","name","JSON","stringify","value","computed","static","uid","Number","MAX_SAFE_INTEGER"],"sources":["../../src/converters/toKeyAlias.ts"],"sourcesContent":["import { isIdentifier, isStringLiteral } from \"../validators/generated\";\nimport cloneNode from \"../clone/cloneNode\";\nimport removePropertiesDeep from \"../modifications/removePropertiesDeep\";\nimport type * as t from \"..\";\n\nexport default function toKeyAlias(\n  node: t.Method | t.Property,\n  key: t.Node = node.key,\n): string {\n  let alias;\n\n  // @ts-expect-error todo(flow->ts): maybe add node type check before checking `.kind`\n  if (node.kind === \"method\") {\n    return toKeyAlias.increment() + \"\";\n  } else if (isIdentifier(key)) {\n    alias = key.name;\n  } else if (isStringLiteral(key)) {\n    alias = JSON.stringify(key.value);\n  } else {\n    alias = JSON.stringify(removePropertiesDeep(cloneNode(key)));\n  }\n\n  // @ts-expect-error todo(flow->ts): maybe add node type check before checking `.computed`\n  if (node.computed) {\n    alias = `[${alias}]`;\n  }\n\n  // @ts-expect-error todo(flow->ts): maybe add node type check before checking `.static`\n  if (node.static) {\n    alias = `static:${alias}`;\n  }\n\n  return alias;\n}\n\ntoKeyAlias.uid = 0;\n\ntoKeyAlias.increment = function () {\n  if (toKeyAlias.uid >= Number.MAX_SAFE_INTEGER) {\n    return (toKeyAlias.uid = 0);\n  } else {\n    return toKeyAlias.uid++;\n  }\n};\n"],"mappings":"AAAA,SAASA,YAAY,EAAEC,eAAe,QAAQ,kCAAyB;AACvE,OAAOC,SAAS,MAAM,uBAAoB;AAC1C,OAAOC,oBAAoB,MAAM,0CAAuC;AAGxE,eAAe,SAASC,UAAUA,CAChCC,IAA2B,EAC3BC,GAAW,GAAGD,IAAI,CAACC,GAAG,EACd;EACR,IAAIC,KAAK;EAGT,IAAIF,IAAI,CAACG,IAAI,KAAK,QAAQ,EAAE;IAC1B,OAAOJ,UAAU,CAACK,SAAS,EAAE,GAAG,EAAE;EACpC,CAAC,MAAM,IAAIT,YAAY,CAACM,GAAG,CAAC,EAAE;IAC5BC,KAAK,GAAGD,GAAG,CAACI,IAAI;EAClB,CAAC,MAAM,IAAIT,eAAe,CAACK,GAAG,CAAC,EAAE;IAC/BC,KAAK,GAAGI,IAAI,CAACC,SAAS,CAACN,GAAG,CAACO,KAAK,CAAC;EACnC,CAAC,MAAM;IACLN,KAAK,GAAGI,IAAI,CAACC,SAAS,CAACT,oBAAoB,CAACD,SAAS,CAACI,GAAG,CAAC,CAAC,CAAC;EAC9D;EAGA,IAAID,IAAI,CAACS,QAAQ,EAAE;IACjBP,KAAK,GAAI,IAAGA,KAAM,GAAE;EACtB;EAGA,IAAIF,IAAI,CAACU,MAAM,EAAE;IACfR,KAAK,GAAI,UAASA,KAAM,EAAC;EAC3B;EAEA,OAAOA,KAAK;AACd;AAEAH,UAAU,CAACY,GAAG,GAAG,CAAC;AAElBZ,UAAU,CAACK,SAAS,GAAG,YAAY;EACjC,IAAIL,UAAU,CAACY,GAAG,IAAIC,MAAM,CAACC,gBAAgB,EAAE;IAC7C,OAAQd,UAAU,CAACY,GAAG,GAAG,CAAC;EAC5B,CAAC,MAAM;IACL,OAAOZ,UAAU,CAACY,GAAG,EAAE;EACzB;AACF,CAAC"}