{"version":3,"names":["NODE_FIELDS","NODE_PARENT_VALIDATIONS","validate","node","key","val","fields","type","field","validateField","validateChild","optional"],"sources":["../../src/validators/validate.ts"],"sourcesContent":["import {\n  NODE_FIELDS,\n  NODE_PARENT_VALIDATIONS,\n  type FieldOptions,\n} from \"../definitions\";\nimport type * as t from \"..\";\n\nexport default function validate(\n  node: t.Node | undefined | null,\n  key: string,\n  val: any,\n): void {\n  if (!node) return;\n\n  const fields = NODE_FIELDS[node.type];\n  if (!fields) return;\n\n  const field = fields[key];\n  validateField(node, key, val, field);\n  validateChild(node, key, val);\n}\n\nexport function validateField(\n  node: t.Node | undefined | null,\n  key: string,\n  val: any,\n  field: FieldOptions | undefined | null,\n): void {\n  if (!field?.validate) return;\n  if (field.optional && val == null) return;\n\n  field.validate(node, key, val);\n}\n\nexport function validateChild(\n  node: t.Node | undefined | null,\n  key: string,\n  val?: t.Node | undefined | null,\n) {\n  if (val == null) return;\n  const validate = NODE_PARENT_VALIDATIONS[val.type];\n  if (!validate) return;\n  validate(node, key, val);\n}\n"],"mappings":"AAAA,SACEA,WAAW,EACXC,uBAAuB,QAElB,yBAAgB;AAGvB,eAAe,SAASC,QAAQA,CAC9BC,IAA+B,EAC/BC,GAAW,EACXC,GAAQ,EACF;EACN,IAAI,CAACF,IAAI,EAAE;EAEX,MAAMG,MAAM,GAAGN,WAAW,CAACG,IAAI,CAACI,IAAI,CAAC;EACrC,IAAI,CAACD,MAAM,EAAE;EAEb,MAAME,KAAK,GAAGF,MAAM,CAACF,GAAG,CAAC;EACzBK,aAAa,CAACN,IAAI,EAAEC,GAAG,EAAEC,GAAG,EAAEG,KAAK,CAAC;EACpCE,aAAa,CAACP,IAAI,EAAEC,GAAG,EAAEC,GAAG,CAAC;AAC/B;AAEA,OAAO,SAASI,aAAaA,CAC3BN,IAA+B,EAC/BC,GAAW,EACXC,GAAQ,EACRG,KAAsC,EAChC;EACN,IAAI,EAACA,KAAK,YAALA,KAAK,CAAEN,QAAQ,GAAE;EACtB,IAAIM,KAAK,CAACG,QAAQ,IAAIN,GAAG,IAAI,IAAI,EAAE;EAEnCG,KAAK,CAACN,QAAQ,CAACC,IAAI,EAAEC,GAAG,EAAEC,GAAG,CAAC;AAChC;AAEA,OAAO,SAASK,aAAaA,CAC3BP,IAA+B,EAC/BC,GAAW,EACXC,GAA+B,EAC/B;EACA,IAAIA,GAAG,IAAI,IAAI,EAAE;EACjB,MAAMH,QAAQ,GAAGD,uBAAuB,CAACI,GAAG,CAACE,IAAI,CAAC;EAClD,IAAI,CAACL,QAAQ,EAAE;EACfA,QAAQ,CAACC,IAAI,EAAEC,GAAG,EAAEC,GAAG,CAAC;AAC1B"}